executor: node-large

parameters:
  vercel-environment:
    type: enum
    default: preview
    enum: ["preview", "production"]
  vercel-project-id:
    type: string
  vercel-org-id:
    type: string
  vercel-token:
    type: string

steps:
  - checkout
  - setup-pnpm
  - setup-vercel:
      vercel-environment: <<parameters.vercel-environment>>
      vercel-project-id: <<parameters.vercel-project-id>>
      vercel-org-id: <<parameters.vercel-org-id>>
      vercel-token: <<parameters.vercel-token>>
  - deploy-to-vercel:
      vercel-environment: <<parameters.vercel-environment>>
